{
  "graphlettes": [
    {
      "path": "/farm/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-farm",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/farm.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "query": "{\"id\": \"{{id}}\"}"
          }
        ],
        "vectors": [],
        "resolvers": [
          {
            "name": "coops",
            "queryName": "getByFarm",
            "url": "http://localhost:3033/coop/graph"
          }
        ]
      }
    },
    {
      "path": "/coop/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-coop",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/coop.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getByName",
            "id": "name",
            "query": "{\"payload.name\": \"{{id}}\"}"
          },
          {
            "name": "getById",
            "query": "{\"id\": \"{{id}}\"}"
          }
        ],
        "vectors": [
          {
            "name": "getByFarm",
            "query": "{\"payload.farm_id\": \"{{id}}\"}"
          }
        ],
        "resolvers": [
          {
            "name": "farm",
            "id": "farm_id",
            "queryName": "getById",
            "url": "http://localhost:3033/farm/graph"
          },
          {
            "name": "hens",
            "queryName": "getByCoop",
            "url": "http://localhost:3033/hen/graph"
          }
        ]
      }
    },
    {
      "path": "/hen/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-hen",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/hen.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "query": "{\"id\": \"{{id}}\"}"
          }
        ],
        "vectors": [
          {
            "name": "getByName",
            "query": "{\"payload.name\": \"{{name}}\"}"
          },
          {
            "name": "getByCoop",
            "query": "{\"payload.coop_id\": \"{{id}}\"}"
          }
        ],
        "resolvers": [
          {
            "name": "coop",
            "id": "coop_id",
            "queryName": "getById",
            "url": "http://localhost:3033/coop/graph"
          }
        ]
      }
    }
  ],
  "port": 3033,
  "restlettes": [
    {
      "path": "/farm/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-farm",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/farm.schema.json"
    },
    {
      "path": "/coop/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-coop",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/coop.schema.json"
    },
    {
      "path": "/hen/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-hen",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/hen.schema.json"
    }
  ],
  "url": ${?PLATFORM_URL}
}