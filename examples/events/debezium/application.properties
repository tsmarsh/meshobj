# ---- Debezium Server (source: MongoDB, sink: Kafka) ----

# Source connector
debezium.source.connector.class=io.debezium.connector.mongodb.MongoDbConnector
debezium.source.mongodb.connection.string=mongodb://mongodb:27017/?replicaSet=rs0
debezium.source.topic.prefix=events
debezium.source.capture.mode=change_streams
debezium.source.publish.full.document.only=true
# Limit to the two collections we care about
debezium.source.collection.include.list=events_development.event,events_development.processedevent
# Get full doc on updates (Mongo 4.4+)
debezium.source.mongodb.change.stream.full.document=updateLookup

# (If you enable auth on Mongo, add user/password here)
# debezium.source.mongodb.user=debezium
# debezium.source.mongodb.password=debeziumpw
# debezium.source.mongodb.auth.source=admin

# Sink: Kafka (Redpanda)
debezium.sink.type=kafka
debezium.sink.kafka.producer.bootstrap.servers=redpanda:9092
debezium.sink.kafka.producer.key.serializer=org.apache.kafka.common.serialization.StringSerializer
debezium.sink.kafka.producer.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# Serialization
debezium.format.key=json
debezium.format.value=json

# Optional: reduce noise
debezium.source.tombstones.on.delete=false
debezium.source.message.key.columns=events_development.event:_id,events_development.processedevent:_id

# Offset storage
debezium.source.offset.storage=org.apache.kafka.connect.storage.FileOffsetBackingStore
debezium.source.offset.storage.file.filename=/tmp/offsets.dat
debezium.source.offset.flush.interval.ms=1000