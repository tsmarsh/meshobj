{
  port = ${?PORT}
  url = ${?PLATFORM_URL}

  # Centralized database configuration
  # Write service connects to PRIMARY for all writes

  henDB = {
    type = "mongo"
    uri = ${?MONGO_URI}
    db = ${?PREFIX}_${?ENV}
    collection = ${?PREFIX}-${?ENV}-hen
    options {
      directConnection = false
      replicaSet = "rs0"
    }
  }

  coopDB = {
    type = "mongo"
    uri = ${?MONGO_URI}
    db = ${?PREFIX}_${?ENV}
    collection = ${?PREFIX}-${?ENV}-coop
    options {
      directConnection = false
      replicaSet = "rs0"
    }
  }

  farmDB = {
    type = "mongo"
    uri = ${?MONGO_URI}
    db = ${?PREFIX}_${?ENV}
    collection = ${?PREFIX}-${?ENV}-farm
    options {
      directConnection = false
      replicaSet = "rs0"
    }
  }

  # WRITE SERVICE: REST endpoints only (Commands)
  # All mutations go to MongoDB primary
  restlettes = [
    {
      path = "/farm/api"
      storage = ${farmDB}
      schema = include file(json/farm.schema.json)
    },
    {
      path = "/coop/api"
      storage = ${coopDB}
      schema = include file(json/coop.schema.json)
    },
    {
      path = "/hen/api"
      storage = ${henDB}
      schema = include file(json/hen.schema.json)
    }
  ]

  # No GraphQL endpoints on write service
  graphlettes = []
}
